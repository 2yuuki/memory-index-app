<!DOCTYPE html>
<!--
 * The Memory Index
 * Copyright (C) 2025 Nguyen Thu Trang (s3926717)
 * 
 * Author: Nguyen Thu Trang (s3926717)
 * Contact: s3926717@rmit.edu.vn, yuuki24.work@gmail.com, @yuuwouldnever on Instagram
 * This is the final results for my Major Project COMM2754, Semester C 2025 at RMIT University
 * School of Communication and Design, RMIT University Vietnam
 * 
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <https://www.gnu.org/licenses/>.
 *
 * REFERENCES:
 * 
 * 1. Dither Mode (Tab 2 - Image Processor):
 *    Nicup n.d., Works, nicup.art, viewed 20 November 2025, <https://nicup.art/works/>.
 * 
 * 2. Marker Presets (Tab 2 - Image Processor):
 *    OpenProcessing n.d., Sketch 2589051, OpenProcessing, viewed 20 November 2025, <https://openprocessing.org/sketch/2589051>.
 * 
 * 3. ASCII Filter Main Code (Tab 2):
 *    OpenProcessing n.d., Sketch 2729335, OpenProcessing, viewed 20 November 2025, <https://openprocessing.org/sketch/2729335>.
 * 
 * 4. ASCII Painting Tool (Tab 3):
 *    OpenProcessing n.d., Sketch 2655050, OpenProcessing, viewed 15 November 2025, <https://openprocessing.org/sketch/2655050>.
 *    HLNET n.d., ASCII Automata, Neocities, viewed 16 November 2025, <https://hlnet.neocities.org/ascii-automata/>.
 * 
 * 5. Functions for tools in Tab 4:
 *    Google Gemini.
 * 
 * 6. Connecting tabs together:
 *    Google Gemini.
 * 
 * 7. Local Storage:
 *    Google Gemini.
 -->
 
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>The Memory Index</title>
  <link rel="icon" href="assets/UI items/logo.svg" type="image/x-icon" />
  <script src="https://cdn.jsdelivr.net/npm/p5@1.11.11/lib/p5.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html-to-image/1.11.11/html-to-image.min.js"></script>
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="https://use.typekit.net/ptv6ncb.css" crossorigin="anonymous">
</head>
<body>

<div id="boot-screen"></div>
<div class="noise-overlay"></div>
<div id="mobile-warning">
  <span class="lang-en">For the best experience, please use a Tablet or Desktop device.</span>
  <span class="lang-vi hidden">Vui lòng sử dụng Tablet hoặc Desktop để có trải nghiệm tốt nhất.</span>
  <button onclick="this.parentElement.style.display='none'" style="margin-left:10px; background:none; border:1px solid #000; cursor:pointer; font-family:inherit;">✕</button>
</div>
<div id="app-container">

  <div class="app-sidebar">
    <div class="sidebar-bg-rotated"></div>
    <div class="sidebar-tab active" data-tab="tab-thoughts" onclick="switchTab('tab-thoughts')" data-tooltip="Tab 1: Write and collect your thoughts.">1. Thoughts</div>
    <div class="sidebar-tab" data-tab="tab-image-proc" onclick="switchTab('tab-image-proc')" data-tooltip="Tab 2: Process images into ASCII art.">2. Image Processor</div>
    <div class="sidebar-tab" data-tab="tab-sketch" onclick="switchTab('tab-sketch')" data-tooltip="Tab 3: Sketch freely with ASCII characters.">3. ASCII Sketch</div>
    <div class="sidebar-tab" data-tab="tab-index" onclick="switchTab('tab-index')" data-tooltip="Tab 4: Arrange your memory diagram.">4. Memory Diagram</div>
  </div>

  <div class="layout-column">
    <!-- TOP BAR -->
    <div class="top-bar">
      <div class="top-bar-overlay"></div>

      <div class="brand-pill">
      </div>

      <div class="tabs-container">
        <div class="tab-btn active" onclick="switchSidebar('intro')">I. Introduction</div>
        <div class="tab-btn" onclick="switchSidebar('tools')" data-tooltip="Click to enter Tool System">II. Tool Tab</div>
      </div>

      <div class="top-right-controls">
        <button class="btn-retro btn-small-save" onclick="document.getElementById('instruction-modal').style.display='flex'" style="margin-right: 10px;">Instruction Sheet</button>
      </div>
    </div>

  <!-- INTRO VIEW -->
  <div id="intro-view" class="intro-container">
    <video autoplay loop muted playsinline class="intro-video-bg">
      <source src="assets/UI items/M2U00209_1.mp4" type="video/mp4">
    </video>
      <div class="intro-content intro-paper-content">
        <div class="paper-lines"></div>
        <div class="margin-line"></div>
        <div style="position: relative; z-index: 1;">

  <img src="assets/UI items/logo.svg" class="intro-logo" alt="Logo">

  <h1 id="intro-title" class="section-title" style="text-align:center; font-family: 'Bianzhidai', monospace;">
    The Index of Memory
  </h1>

  <p style="text-align:center; font-family:'KK7VCROSDMono'; color:#182983; line-height:1.6;">
    Creative Process Documentation<br>
    Nguyen Thu Trang – s3926717<br>
    COMM2754 Major Project, Semester C 2025<br>
    School of Communication and Design, RMIT University Vietnam
  </p>

  <div class="divider"></div>

  <div style="max-width:1200px; margin:0 auto;">
    <h2 class="intro-heading-2">
      <span class="lang-vi hidden">I. Tổng quan dự án</span>
      <span class="lang-en">I. Project Overview</span>
    </h2>

    <h3 class="intro-heading-3">
      <span class="lang-vi hidden">1. Tuyên ngôn ý tưởng</span>
      <span class="lang-en">1. Concept Statement</span>
    </h3>
    <p class="intro-desc">
      <span class="lang-vi hidden">
        Tôi muốn thực hiện một dự án lớn có thể truyền cảm hứng cho mọi người trân trọng những cảm xúc trong quá khứ và những ký ức cốt lõi để họ có thể hiểu bản thân mình hơn. Vì tôi nhận thấy chúng ta đang sống trong một xã hội bảo chúng ta phải phớt lờ những cảm xúc mạnh mẽ để chiến thắng trong cuộc sống, nhưng điều đó không đúng. Từ trải nghiệm của chính mình, tôn trọng những gì chúng ta cảm thấy giúp chúng ta trưởng thành.
      </span>
      <span class="lang-en">
        I want to make a major project that would inspire people to embrace their past emotions
        and core memories so they can understand themselves better. Since I notice that we are
        living in a society that tells us to ignore the strong emotions in order to win in life,
        but it’s not true. From my own experience, respecting what we feel helps us grow.
      </span>
    </p>

    <div class="divider"></div>

    <h3 class="intro-heading-3">
      <span class="lang-vi hidden">2. Tóm tắt</span>
      <span class="lang-en">2. Abstract</span>
    </h3>
    <p class="intro-desc">
      <span class="lang-vi hidden">
        The Memory Index là một nền tảng tương tác công cộng trên web được xây dựng bằng p5.js. Dự án chuyển đổi những ký ức cá nhân—ghi chú viết tay, hình ảnh và phác thảo—thành những hiện vật trực quan có thể in được. Những đầu ra này có dạng Biểu đồ Chỉ số Ký ức và trò chơi Đông-Tây-Nam-Bắc bằng giấy. Dự án khám phá cách thẩm mỹ net.art và các hệ thống tính toán có thể hoạt động như những công cụ để phản chiếu cảm xúc.
      </span>
      <span class="lang-en">
        The Memory Index is a public, web-based interactive platform built with p5.js. The project
        transforms personal memories—written notes, images, and sketches—into printable visual
        artifacts. These outputs take the form of a Memory Index Diagram and an East–West–South–North
        paper fortune-teller. The project explores how net.art aesthetics and computational systems
        can function as tools for emotional reflection.
      </span>
    </p>

    <p class="intro-desc"><em>Fig 1. My ASCII drawing using my own Memory Index Tool</em></p>

    <div class="divider"></div>

    <h3 class="intro-heading-3">
      <span class="lang-vi hidden">3. Câu hỏi dự án</span>
      <span class="lang-en">3. Project Question</span>
    </h3>
    <p class="intro-desc">
      <span class="lang-vi hidden">
        Câu hỏi nghiên cứu định hướng cho dự án này là:<br><br>
        <strong>“Làm thế nào chúng ta có thể trân trọng ký ức của mình thông qua net.art?”</strong><br><br>
        Thay vì đưa ra câu trả lời hay đơn thuốc, dự án điều tra cách các hệ thống net.art—như biểu đồ, đồ họa ASCII và các tương tác gốc trên trình duyệt—có thể chuyển dịch các trạng thái cảm xúc thành các dạng thức có thể đọc và xem lại được.
      </span>
      <span class="lang-en">
        The guiding research question for this project is:
        <br><br>
        <strong>“How can we embrace our memories through the net.art?”</strong>
        <br><br>
        Rather than offering answers or prescriptions, the project investigates how net.art systems—
        such as diagrams, ASCII graphics, and browser-native interactions—can translate emotional
        states into readable and revisit-able forms.
      </span>
    </p>

    <div class="divider"></div>

    <h3 class="intro-heading-3">
      <span class="lang-vi hidden">4. Khán giả mục tiêu</span>
      <span class="lang-en">4. Target Audience</span>
    </h3>
    <p class="intro-desc">
      <span class="lang-vi hidden">
        Khán giả chính của The Memory Index là người dùng Việt Nam độ tuổi 18–30, mặc dù nền tảng vẫn mở cho tất cả mọi người. Đối tượng này hoài niệm về văn hóa đại chúng Việt Nam những năm 2000–2010 và thích viết nhật ký, làm đồ DIY và thử nghiệm hình ảnh. Nhiều người dùng không thích việc viết nhật ký chỉ toàn chữ truyền thống và thích các công cụ vui tươi, có tính tạo sinh cho phép suy ngẫm trong những phiên ngắn vào đêm khuya.
      </span>
      <span class="lang-en">
        The primary audience for The Memory Index is Vietnamese users aged 18–30, though the platform
        remains open to everyone. This audience is nostalgic for Vietnamese pop culture from the
        2000s–2010s and enjoys journaling, DIY making, and visual experimentation. Many users dislike
        traditional text-only journaling and prefer playful, generative tools that allow reflection
        in short, late-night sessions.
      </span>
    </p>

    <div class="divider"></div>

    <h2 class="intro-heading-2" style="font-family: 'Bianzhidai', monospace;"></h2>
    <div class="gallery-grid">
      <img src="assets/social photos/DSC08452_2.gif" class="gallery-grid-img" loading="lazy">
      <img src="assets/social photos/P1010007.JPG" class="gallery-grid-img" loading="lazy">
      <img src="assets/social photos/P1010008.JPG" class="gallery-grid-img" loading="lazy">
      <img src="assets/social photos/P1010010.JPG" class="gallery-grid-img" loading="lazy">
      <img src="assets/social photos/P1010017.JPG" class="gallery-grid-img" loading="lazy">
      <img src="assets/social photos/P1010019.JPG" class="gallery-grid-img" loading="lazy">
      <img src="assets/social photos/P1010020.JPG" class="gallery-grid-img" loading="lazy">
      <img src="assets/social photos/P1010029.JPG" class="gallery-grid-img" loading="lazy">
    </div>

    <div class="divider"></div>

    <h2 class="intro-heading-2" style="font-family: 'Bianzhidai', monospace;">Users' Results</h2>
    <p class="intro-desc">
      A collection of memory artifacts generated by users.
    </p>

    <div style="position: relative;">
      <button class="gallery-nav-btn prev" id="user-gal-prev">&lt;</button>
      <div class="gallery-slideshow" id="users-results-container">
        <div class="gallery-track" id="users-results-track">
           <div id="gallery-placeholder" class="gallery-placeholder" style="display:none;">(Loading Gallery...)</div>
        </div>
      </div>
      <button class="gallery-nav-btn next" id="user-gal-next">&gt;</button>
    </div>

    <div class="divider"></div>

    <h2 class="intro-heading-2">
      <span class="lang-en">Foreword</span>
    </h2>
    <div class="intro-desc">
      <span class="lang-en">
        Honestly, over the past few years, my inner life has been in a pretty bad place. It’s like—I became afraid of feeling sad, so I stopped allowing myself to feel too much of anything at all. I tried not to care too deeply about anything.<br><br>
        Over time, that left me completely hollow. I wasn’t deeply sad, but I wasn’t excited either. And gradually, I began to forget my own memories. Not all of them were exactly “precious” memories—some of them were terrifying to me at the time. But now, I feel so detached from my own emotions that I no longer remember those memories as things I once lived through.<br><br>
        I would catch myself thinking:<br>
        “Did this really happen to me?”<br>
        “But why don’t I feel anything about it anymore?”<br><br>
        It feels as if I’m looking at someone else’s memories—like a stranger’s fragments—and I’m just a guest who happened to overhear their story.<br><br>
        That realization made me sad. The things I went through once felt so intense—joy, sorrow, overflowing happiness, and the deepest pain. I truly believe I tasted every bitter and sweet flavor of life. And yet now, everything looks the same, as if my memories have lost their meaning.<br><br>
        Without them, I feel like I no longer have a core holding me together—like a person already worn down by life, trying to keep moving without anything inside to anchor them.<br><br>
        I’m afraid I won’t be able to endure a life that is sometimes boring, sometimes difficult. I’m also afraid I won’t fully live the gift that this dull, exhausting life occasionally throws my way.<br><br>
        Because of that fear, I decided to turn inward. To look closely at what I really think, what I have actually felt, and how the people around me are living their lives. I realized I needed to carefully take inventory of my experiences—one by one—so that someday, I might be able to leap further forward. That is why I started this project.<br><br>
        I want to thank the people who have supported me until now, even though I know I’ve often been careless toward them. I also want to change myself. And for that reason, I felt I had to make this project.<br><br>
        —<br><br>
        At the beginning, I wanted to tell a story about a group of abandoned memories rising up and marching together to demand justice. It would have been an expedition of forgotten things, with their destination being the person who owned those memories. I imagined that once they arrived, they’d probably beat that person up for daring to forget them.<br><br>
        But making a short animated film on my own felt unrealistic to finish within a three-month course. My mentor suggested a different approach: what if I created a single interactive 3D character on a web platform instead? People could interact with it by drawing their childhood imaginations on paper, and I would project those drawings onto the 3D character as a custom skin. Users could also change the character’s environment—like Northern Vietnamese countryside scenes or Southern river landscapes—and even choose regional lullabies they grew up with.<br><br>
        Eventually, I realized this idea wasn’t very engaging. Asking users to immediately draw their childhood imagination felt too demanding, and the interaction didn’t encourage the kind of inward reflection I wanted. With only one interaction, the reflection felt shallow.<br><br>
        So I started looking for another way to create a work that would allow people a small, honest moment to think back on their past. That’s when I thought about journaling.<br><br>
        I’m not someone who naturally journals. And because of that, I think I paid the price—I ended up trivializing a large part of my life, just like I described earlier.<br><br>
        I realized I needed to try writing down what I was truly feeling. So I created a website where people can write and redraw their memories. Users can write their thoughts, save images of things that happened, or—if they don’t have images—draw instead.<br><br>
        Traditional note-based journaling feels boring to me. So maybe this website could be a more interesting option for someone on a sleepless night. At least, it works for me.<br><br>
        Because of that, I wanted the website to have a strong concept as its unique selling point. I wanted to return to my elementary school years—when I was just a kid who didn’t overthink, who felt confident with what they had, who accepted themselves as they were, and who loved what they were doing. Back then, everything felt clear, as if I already had all the answers.<br><br>
        That’s why I chose aesthetics from the 2010s: childhood games, grid-lined notebooks, purple ink pens, Zing Me—things deeply familiar to kids who grew up in that era. It’s my way of inviting those memories to come back to me.<br><br>
        At the same time, I wanted something structured to exist alongside those emotions—something systematic and clear. That way, I wouldn’t drown in sentimentality, and I could reflect more clearly. I began thinking about charts, systems, numbers, and reports. That led me to net.art diagrams—complex visual systems used to describe something deeply emotional and subjective.<br><br>
        So I decided to combine net.art—a form of computer-based art from the early internet—with the nostalgic memories of Vietnamese students from the 2010s, and see what would happen.
      </span>
    </div>
  </div>

  <div class="user-results-container">
    <div class="user-result-row">
      <img src="assets/document/image%20(1).png" class="user-result-img" loading="lazy">
      <img src="assets/document/image.png" class="user-result-img" loading="lazy">
      <div class="user-result-caption">Users' using The Memory Index Tools to create ASCII drawings</div>
    </div>
    
    <div class="user-result-row">
      <img src="assets/document/IMG_2591.jpg" class="user-result-img" loading="lazy">
      <img src="assets/document/IMG_2593.jpg" class="user-result-img" loading="lazy">
      <div class="user-result-caption">Then the results will be printed out by Nguyen Thu Trang (yuuki) to display at the RMIT Major Project Showcase</div>
    </div>
  </div>

  <div class="divider"></div>

  <div style="max-width:1200px; margin:0 auto;"> <!-- Main Content Container -->

    <h2 class="intro-heading-2">
      <span class="lang-vi hidden">II. Thực hành sáng tạo và Phát triển </span>
      <span class="lang-en">II. Creative Practice and Iterative Development</span>
    </h2>

    <h3 class="intro-heading-3">
      <span class="lang-vi hidden">1. Tuần 0–2: Định hướng hình ảnh và Thử nghiệm ban đầu</span>
      <span class="lang-en">1. Week 0–2: Visual Direction and Early Experiments</span>
    </h3>
    <p class="intro-desc">
      <span class="lang-vi hidden">
        Trong giai đoạn đầu của dự án, trọng tâm là thiết lập một định hướng hình ảnh có thể cân bằng giữa thẩm mỹ biên tập hoài cổ của Việt Nam với net.art và hình ảnh thơ-dữ liệu. Các thử nghiệm ban đầu khám phá kiểu chữ lấy cảm hứng từ chữ viết tay của học sinh Việt Nam và các thử nghiệm bố cục sớm sử dụng p5.js. Tôi cũng bắt đầu thử nghiệm các bộ lọc hình ảnh như posterization và pixelation để hiểu cách hình ảnh ký ức có thể được chuyển đổi thành các kết cấu có thể in được.
      </span>
      <span class="lang-en">
        During the early stage of the project, the focus was on establishing a visual direction that
        could balance Vietnamese nostalgic editorial aesthetics with net.art and data-poetic visuals.
        Initial experiments explored typography inspired by Vietnamese student handwriting and early
        layout tests using p5.js. I also began experimenting with image filters such as posterization
        and pixelation to understand how memory images could be transformed into printable textures.
      </span>
    </p>

    <h3 class="intro-heading-3">
      <span class="lang-vi hidden">2. Tuần 3: Phản ánh cá nhân và Thử nghiệm tương tác</span>
      <span class="lang-en">2. Week 3: Personal Reflection and Interaction Testing</span>
    </h3>
    <p class="intro-desc">
      <span class="lang-vi hidden">
        Vào Tuần 3, tôi bắt đầu bằng việc suy ngẫm về những ký ức cốt lõi của chính mình thông qua việc viết. Quá trình viết nhật ký cá nhân này đã giúp thiết lập nền tảng cảm xúc cho dự án. Đồng thời, tôi đã tiến hành các thử nghiệm tương tác sớm trên web, bao gồm cơ chế phác thảo đơn giản và thử nghiệm in trò chơi Đông-Tây-Nam-Bắc. Những thử nghiệm này cho thấy việc vẽ tự do bằng chuột cảm thấy không thoải mái và không khuyến khích sự suy ngẫm.
      </span>
      <span class="lang-en">
        In Week 3, I began by reflecting on my own core memories through writing. This personal journaling process helped establish an emotional foundation for the project. At the same time, I conducted early interaction tests on the web, including simple sketching mechanics and paper fortune-teller print tests. These experiments revealed that freehand mouse drawing felt uncomfortable and did not encourage reflection.
      </span>
    </p>

    <div style="background:#f9f9f9; border-left: 4px solid #f75397; padding:20px; margin:20px 0; font-style:italic; font-size:0.95em; line-height: 1.8;">
        <p style="margin:0; white-space:pre-line;">
          <span class="lang-vi hidden">
            Một ngày nọ, tôi thấy mình đang chìm xuống,
            và tôi không biết làm sao để đánh thức cô ấy dậy.
            ⎯⎯⎯
            Cứ như thể chúng tôi là những người xa lạ có chung một khuôn mặt.
            Cô ấy không thể nhận ra giọng nói của tôi, và tôi không biết làm sao để chạm tới cô ấy.
            ⎯⎯⎯
            Tôi nhờ những Kẻ Bị Lãng Quên giúp tôi đánh thức thứ bên trong đó.
            Họ từ chối. Họ mang theo những oán giận tương tự.

            "Ngươi là ai?" họ hét lên.
            "Sao ngươi dám nhờ chúng ta giúp khi chúng ta cũng cần giúp đỡ?
            Ngươi đã ném chúng ta xuống đây—và giờ ngươi không biết làm sao để thả chúng ta ra?
            Chúng ta đang chết cùng nhau. Ngươi và chúng ta."
            ⎯⎯⎯
            "Sống một cuộc đời khốn kiếp như vậy thì có ý nghĩa gì?" tôi tự hỏi.

            Tôi yêu cuộc sống khi tôi nằm trên chân bà và bà hát những bài hát ru cũ.
            Không khí thiêu đốt châm chích da tôi, một cái nóng ẩm ướt mà tôi không thể tìm thấy ở đâu khác.

            Tôi yêu cuộc sống khi tôi vẫn có thể ngủ cùng phòng với bố.
            Mỗi đêm tôi hôn lên má ông chúc ngủ ngon.
            Những chú chim buổi sáng dệt tổ bên ngoài cửa sổ của chúng tôi; giọng hót của chúng khơi dậy thôi thúc sáng tạo—
            để mang một chút vẻ đẹp vào thế giới.

            Tôi yêu cuộc sống khi anh trai cõng tôi trên lưng.
            Tôi yêu cảm giác đó—được yêu thương, biết điều đó, và biết ơn.

            Tôi yêu cuộc sống khi tôi nhìn lên bầu trời, đuổi theo bạn bè quanh góc phố của chúng tôi.
            Gió luồn qua những chiếc lá với tốc độ vừa phải, vẽ nên những hoa văn nhỏ bé từ bên dưới.
            Ánh nắng chiếu vào mắt tôi rực rỡ đến mức nó vẫn tỏa sáng trong ký ức.

            Đó là rất nhiều thứ.

            Vì vậy tôi cầu xin chính mình:
            đừng vội quên chúng.
            Hãy cố gắng thức dậy lần nữa.

            Làm ơn.

            Ngay cả khi bây giờ không được, ngay cả khi chúng ta thất bại nhiều lần,
            hãy nhớ rằng: một ngày nào đó chúng ta sẽ cảm nhận lại được—
            sự bơi ngược dòng, sự thức tỉnh.

            Hãy tiếp tục đi qua mọi cột mốc của cuộc đời.

            Tôi biết tôi có thể.
            Tôi yêu bạn—
            ngay cả khi tôi không nhận ra bạn cần bao nhiêu cái ôm.
          </span>
          <span class="lang-en">
            One day I found myself drowning,
            and I don’t know how to wake her up.
            ⎯⎯⎯
            It was as if we were strangers who shared a face.
            She couldn’t recognize my voice, and I didn’t know how to reach her.
            ⎯⎯⎯
            I asked the Forgotten to help me wake that thing inside.
            They refused. They carried the same resentments.

            “Who are you?” they yelled.
            “How can you ask us to help when we also needed help?
            You threw us down here—and now you don’t know how to let us out?
            We are dying together. You and us.”
            ⎯⎯⎯
            “What is the point of living such a damn life?” I wondered.

            I love living when I lie on my grandmother’s legs and she sings the old lullaby.
            The scorching air stings my skin, a humid heat I can’t find anywhere else.

            I love living when I can still sleep in the same room as my dad.
            Every night I kiss his cheek goodnight.
            Morning birds weave a nest outside our window; their voices spark the urge to create—
            to bring a little beauty into the world.

            I love living when my brother carries me on his back.
            I love that feeling—being loved, knowing it, being grateful.

            I love living when I look up at the sky, chasing my friends around the corner of our neighborhood.
            Wind threads through the leaves at just the right speed, drawing tiny patterns from below.
            Sunlight hits my eyes so bright it still shines in memory.

            It was a lot of things.

            So I beg myself:
            don’t rush to forget them.
            Try to wake up again.

            Please.

            Even if it doesn’t work now, even if we fail many times,
            remember: one day we will feel it again—
            the swim against the current, the waking.

            Keep going through every milestone of life.

            I know I can.
            I love you—
            even if I didn’t realize how many hugs you needed.
          </span>
        </p>
    </div>

    <div class="divider"></div>

    <h3 class="intro-heading-3" style="font-family: 'Bianzhidai', monospace;">3. Week 4: Image Processing and Prototype Evaluation</h3>
    <p class="intro-desc">
      Week 4 focused on image-processing techniques and overall UX evaluation. I prototyped a print-emulation workflow where images were broken into shadow, midtone, and highlight layers mapped to CMYK or spot colors. Although watercolor-style effects were explored, performance constraints led to a softer, textured alternative. At this stage, I also critically reviewed the prototype and identified issues with visual noise and unclear user flow.
    </p>

    <div class="divider"></div>

    <h3 class="intro-heading-3" style="font-family: 'Bianzhidai', monospace;">4. Week 5: ASCII Filter and Visual Identity Refinement</h3>
    <p class="intro-desc">
      In Week 5, I discovered references that combined ASCII threshold techniques with marker-like textures, which strongly resonated with my childhood memories of using school markers. This inspired the development of a marker-like ASCII filter. I also conducted extensive visual mockups in Adobe Illustrator to strengthen the Vietnamese nostalgic identity and refine the balance between net.art aesthetics and cultural familiarity.
    </p>

    <div class="divider"></div>

    <h3 class="intro-heading-3" style="font-family: 'Bianzhidai', monospace;">5. Week 6: ASCII Painting Tool and Print Testing</h3>
    <p class="intro-desc">
      Week 6 marked the development of the ASCII painting tool. Instead of freehand drawing, users place ASCII characters into a grid, similar to building with LEGO. Informal user testing with friends showed that this interaction was calming and accessible. Finally, I conducted print tests on student notebook paper, handwriting practice paper, and traditional Vietnamese Dó paper. While Dó paper produced beautiful textures, student notebook paper provided the best balance between clarity and nostalgia.
    </p>

    <div class="divider"></div>

    <h2 class="intro-heading-2">
      <span class="lang-vi hidden">III. Tài liệu tham khảo</span>
      <span class="lang-en">V. References</span>
    </h2>
    <ul class="intro-desc intro-list">
      <li style="margin-bottom: 8px;">Dunne, A & Raby, F 2013, Speculative Everything: Design, Fiction, and Social Dreaming, The MIT Press, Cambridge, MA.</li>
      <li style="margin-bottom: 8px;">Lialina, O 1996, My Boyfriend Came Back from the War, online artwork, viewed 5 November 2025, http://www.teleportacia.org/war/.</li>
      <li style="margin-bottom: 8px;">Lozano-Hemmer, R 2006– , Pulse series, installation, viewed 5 November 2025, https://www.lozano-hemmer.com/pulse_series.php.</li>
      <li style="margin-bottom: 8px;">Lupi, G 2017, ‘Data Humanism: The Revolution will be Visualized’, Print Magazine, viewed 5 November 2025, https://www.printmag.com/featured/giorgia-lupi-data-humanism/.</li>
      <li style="margin-bottom: 8px;">Lupton, D 2016, The Quantified Self, Polity Press, Cambridge.</li>
      <li style="margin-bottom: 8px;">Picard, R W 1997, Affective Computing, The MIT Press, Cambridge, MA.</li>
      <li style="margin-bottom: 8px;">Reas, C & Fry, B 2007, Processing: A Programming Handbook for Visual Designers and Artists, The MIT Press, Cambridge, MA.</li>
      <li style="margin-bottom: 8px;">Sengers, P, Boehner, K, David, S & Kaye, J 2005, ‘Reflective design’, in Proceedings of the 4th Decennial Conference on Critical Computing: Between Sense and Sensibility (CC ’05), ACM Press, New York, pp. 49–58.</li>
      <li style="margin-bottom: 8px;">JODI 1995– , JODI.org, online artworks, viewed 5 November 2025, http://wwwwwwwww.jodi.org/.</li>
      <li style="margin-bottom: 8px;">MTAA (M.River & T.Whid Art Associates) 1997, ‘Simple Net Art Diagram’, Rhizome Anthology, viewed 5 November 2025, https://anthology.rhizome.org/simple-net-art-diagram.</li>
      <li style="margin-bottom: 8px;">Connor, M 2015, ‘Notes on the Definition of Net Art’, Rhizome, 17 July, viewed 5 November 2025, https://rhizome.org/editorial/2015/jul/17/notes-definition-net-art/.</li>
      <li style="margin-bottom: 8px;">Mogi, K 2017, The Little Book of Ikigai: The Essential Japanese Way to Finding Your Purpose in Life, Quercus, London.</li>
      <li style="margin-bottom: 8px;">Winn, M 2014, ‘What is your ikigai?’, MarcWinn.com (blog), viewed 5 November 2025, https://marcwinn.com/ikigai/.</li>
      <li style="margin-bottom: 8px;">Sài Gòn Giải Phóng (n.d.) ‘Zing Me – tự hào mạng xã hội Việt’, Sài Gòn Giải Phóng Online, viewed 20 November 2025, https://www.sggp.org.vn/zing-me-tu-hao-mang-xa-hoi-viet-post233795.html.</li>
      <li style="margin-bottom: 8px;">MarketingAI (n.d.) ‘Zing Me: mạng xã hội chưa kịp tỏa sáng đã bị đối thủ “quật” cho không thể ngóc đầu’, MarketingAI, viewed 20 November 2025, https://marketingai.vn/zing-me-mang-xa-hoi-chua-kip-toa-sang-da-bi-doi-thu-quat-cho-khong-the-ngoc-dau-19467600.htm.</li>
      <li style="margin-bottom: 8px;">Thế giới của Quỳnh (2018) ‘Sự sụp đổ của đế chế Zing Me’, WordPress blog, 13 July, viewed 20 November 2025, https://thegioicuaquynh.wordpress.com/2018/07/13/su-sup-do-cua-de-che-zing-me/.</li>
      <li style="margin-bottom: 8px;">Marketing24h (n.d.) ‘Zing Me (tổng quan)’, Marketing24h, viewed 20 November 2025, https://marketing24h.vn/zing-me-2/.</li>
      <li style="margin-bottom: 8px;">YouTube (n.d.) ‘[Video về Zing Me]’, YouTube video, viewed 20 November 2025, https://www.youtube.com/watch?v=1EkFFQ0Kd2I.</li>
      <li style="margin-bottom: 8px;">YouTube (n.d.) ‘[Clip/Phóng sự liên quan Zing Me]’, YouTube video, viewed 20 November 2025, https://www.youtube.com/watch?v=QO_u2ip5-Dw&t=198s.</li>
      <li style="margin-bottom: 8px;">Báo Quân đội Nhân dân (n.d.) ‘Đề cương văn hóa Việt Nam: Những giá trị cốt lõi’, QDND Online, viewed 19 November 2025, https://www.qdnd.vn/van-hoa/doi-song/de-cuong-van-hoa-viet-nam-nhung-gia-tri-cot-loi-719015.</li>
      <li style="margin-bottom: 8px;">Tech in Asia (n.d.) ‘Zing Me vs Facebook in Vietnam’, Tech in Asia, viewed 20 November 2025, https://www.techinasia.com/zing-me-facebook-vietnam.</li>
      <li style="margin-bottom: 8px;">Yootek (n.d.) ‘Zing Me – Mạng xã hội’, Yootek, viewed 20 November 2025, https://yootek.vn/zing-me-mang-xa-hoi/.</li>
      <li style="margin-bottom: 8px;">Thương mại Trường Xưa (n.d.) ‘Thương mại Trường Xưa (trang chủ)’, website, viewed 18 November 2025, https://thuongmaitruongxua.vn/.</li>
      <li style="margin-bottom: 8px;">OpenProcessing n.d., ‘Sketch 2655050’, OpenProcessing, viewed 15 November 2025, https://openprocessing.org/sketch/2655050</li>
      <li style="margin-bottom: 8px;">Glyph Drawing Club n.d., ‘Amiga ASCII Art’, blog post, viewed 20 November 2025, https://blog.glyphdrawing.club/amiga-ascii-art/</li>
      <li style="margin-bottom: 8px;">YouTube n.d., ‘Video (ID: W1zKu3fDQR8)’, YouTube, viewed 13 November 2025, https://www.youtube.com/watch?v=W1zKu3fDQR8</li>
      <li style="margin-bottom: 8px;">HLNET n.d., ‘ASCII Automata’, Neocities, viewed 16 November 2025, https://hlnet.neocities.org/ascii-automata/</li>
      <li style="margin-bottom: 8px;">Nicup n.d., ‘Works’, nicup.art, viewed 16 November 2025, https://nicup.art/works/</li>
    </ul>

    </div>
  </div> <!-- End Main Content Container -->
</div>


  </div>

  <div class="app-body" id="main-app-body" style="display:none;">

  <!-- TAB 1: THOUGHTS -->
  <div class="workspace active" id="tab-thoughts">
    <div class="panel-left ribbon ribbon-green" data-ribbon="1. Thoughts">
      <div class="section-title">1/ Write down your thoughts here</div>
      <textarea id="inpThought" class="retro-input" placeholder="Type thoughts..."></textarea>
      <button class="btn-retro" id="btnCreateCard" data-tooltip="Add your thought to the memory archive.">+ add thoughts</button>
    </div>
    <div class="panel-center">
      <!-- Empty or decorative center for thoughts -->
    </div>
  </div>

  <!-- TAB 2: IMAGE PROCESSOR -->
  <div class="workspace" id="tab-image-proc">
    <div class="panel-left ribbon ribbon-green" data-ribbon="2. Processor">
      <div class="section-title">2/ Image Processor</div>
      <!-- Restore hidden elements for compatibility with ui-binding.js -->
      <div id="preview-area" style="display:none;"></div>
      <button id="btnLoadImage" style="display:none;"></button>
      <input type="file" id="fileIn" hidden data-tooltip="Upload an image to process." />

      <div class="section-title">Processor Options</div>
      <div class="mini-row">
        <span>Mode</span>
        <select id="selRenderMode" class="retro-input" style="width:120px; height:24px; padding:0;">
          <option value="ascii">ASCII</option>
          <option value="dither">Dither</option>
        </select>
      </div>

      <div id="ascii-controls">
      <div class="mini-row">
        <span>Ink Type</span>
        <select id="selColorMode" class="retro-input" style="width:120px; height:24px; padding:0;">
          <option value="cmyk">CMYK Marker</option>
          <option value="stabilo">Stabilo Marker</option>
          <option value="mono">Monochrome</option>
          <option value="image">Original</option>
          <option value="brightness">Brightness</option>
        </select>
      </div>
      <div class="mini-row">
        <span>Pattern</span>
        <input type="range" id="cfgWeight" min="0.5" max="3" step="0.1" value="2.5">
      </div>
      <div class="mini-row">
        <span>Preset</span>
        <select id="selAsciiPreset" class="retro-input" style="width:120px; height:24px; padding:0;"></select>
      </div>
      </div>

      <div class="mini-row">
        <span>Threshold</span>
        <input type="range" id="cfgThreshold" min="0" max="255" step="5" value="120">
      </div>
      <div class="mini-row">
        <span>Src Opacity</span>
        <input type="range" id="cfgSrcOpacity" min="0" max="255" step="5" value="255">
      </div>
      
      <div class="mini-row">
        <label class="chk"><input type="checkbox" id="chkInvert" checked> Invert Chars</label>
        <label class="chk"><input type="checkbox" id="chkShowSrc"> Show Source</label>
        <label class="chk"><input type="checkbox" id="chkAnimate"> Animate</label>
      </div>

      <button class="btn-retro" id="cmykSaveBtn" style="margin-top:10px;" data-tooltip="Save processed image to library.">+ add to library</button>
      <button class="btn-retro" id="btnSavePNG" style="margin-top:6px;" data-tooltip="Download as PNG image.">download image</button>
    </div>

    <div class="panel-center">
      <div class="paper-sheet paper-a4" style="height:75%; width:auto; aspect-ratio:297/210; margin:auto; transform:none; border:1px solid #000;">
        <div id="input-canvas-holder" class="canvas-holder">
          <div class="placeholder-text">Drop Image Here</div>
        </div>
      </div>
    </div>
  </div>

  <!-- TAB 3: SKETCH -->
  <div class="workspace" id="tab-sketch">
    <!-- Panel 1: Main Tools -->
    <div id="sketch-main-tools" class="floating-panel">
      <div class="panel-header">
        <span>Tools</span>
        <button class="panel-minimize-btn"><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMCIgaGVpZ2h0PSIyIiB2aWV3Qm94PSIwIDAgMTAgMiI+PHJlY3Qgd2lkdGg9IjEwIiBoZWlnaHQ9IjIiIGZpbGw9IiNmZmYiLz48L3N2Zz4=" class="pixel-icon" style="width:10px;height:2px;background:#fff;"></button>
      </div>
      <div class="panel-content" style="padding:10px; overflow-y:auto;">
        <div class="tools-grid">
          <button class="btn-retro" id="btnPencil" data-tooltip="Draw with selected character."> <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDE2IDE2Ij48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMTEgMkwxMyA0TDEwIDdMNyA1TDExIDJaTTYgNkw5IDlMNCAxNEgyVjEyTDYgNloiLz48L3N2Zz4=" class="pixel-icon"> Pencil</button>
          <button class="btn-retro" id="btnEraser" data-tooltip="Erase characters."> <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDE2IDE2Ij48cGF0aCBmaWxsPSIjMDAwIiBkPSJNNSAyTDExIDhMMTQuNSA0LjVMOC41IDJINVpNNSA0TDggN0w2IDlMMyA2TDUgNFoiLz48L3N2Zz4=" class="pixel-icon"> Eraser</button>
          <button class="btn-retro" id="btnFill" data-tooltip="Fill area with character."> <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDE2IDE2Ij48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMSA0TDMgMTJIOS41TDEyIDRIMVpNMiA1SDExTDkuNSAxMUgzLjVMMiA1WiIvPjwvc3ZnPg==" class="pixel-icon"> Bucket</button>
          <button class="btn-retro" id="btnMagicWand" data-tooltip="Select connected area of same character."> <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDE2IDE2Ij48cGF0aCBmaWxsPSIjMDAwIiBkPSJNOSA1TDExIDdMNCAxNEwyIDEyTDkgNVpNMTIgNEwxMyA1TDE0IDRMMTMgM0wxMiA0Wk0xMCAyTDExIDNMMTIIDJMMTEgMUwxMCAyWk0xNCA2TDE1IDdMMTYgNkwxNSA1TDE0IDZaIi8+PC9zdmc+" class="pixel-icon"> Wand</button>
          <button class="btn-retro" id="btnClearSketch" data-tooltip="Clear the entire canvas."> <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDE2IDE2Ij48cGF0aCBmaWxsPSIjMDAwIiBkPSJNNSAxSDExVjJIMUMxVjNIMVYySDVWMVpNMiA0SDE0VjE1SDJWNFpNMCA1VjEwSDFWNUgwWk0xNSA1VjEwSDE2VjVIMTVaIi8+PC9zdmc+" class="pixel-icon"> Clear</button>
        </div>
      </div>
    </div>

    <!-- Panel 2: Patterns -->
    <div id="sketch-patterns-panel" class="floating-panel" style="top:220px;">
      <div class="panel-header">
        <span>Patterns</span>
        <button class="panel-minimize-btn"><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMCIgaGVpZ2h0PSIyIiB2aWV3Qm94PSIwIDAgMTAgMiI+PHJlY3Qgd2lkdGg9IjEwIiBoZWlnaHQ9IjIiIGZpbGw9IiNmZmYiLz48L3N2Zz4=" class="pixel-icon" style="width:10px;height:2px;background:#fff;"></button>
      </div>
      <div class="panel-content" style="padding:10px; overflow-y:auto;">
        <div id="sketch-palette" class="palette-grid"></div>
      </div>
    </div>

    <!-- Panel 3: Ink -->
    <div id="sketch-ink-panel" class="floating-panel" style="top:440px;">
      <div class="panel-header">
        <span>Ink</span>
        <button class="panel-minimize-btn"><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMCIgaGVpZ2h0PSIyIiB2aWV3Qm94PSIwIDAgMTAgMiI+PHJlY3Qgd2lkdGg9IjEwIiBoZWlnaHQ9IjIiIGZpbGw9IiNmZmYiLz48L3N2Zz4=" class="pixel-icon" style="width:10px;height:2px;background:#fff;"></button>
      </div>
      <div class="panel-content" style="padding:10px; overflow-y:auto;">
        <div style="margin-bottom:10px; display:flex; align-items:center; justify-content:space-between;">
          <span style="font-size:12px;">Custom Ink:</span>
          <input type="color" id="customInkColor" value="#000000" style="width:60px; height:20px; border:none; padding:0;">
        </div>
        <div id="sketch-colors" class="palette-grid palette-ink"></div>
      </div>
    </div>

    <div style="position:relative; width:100%; height:100%; overflow:auto; background:#d0d0d0;">
      <div id="sketch-canvas-holder" style="padding: 20px;"></div>
      <div class="zoom-float" style="position:absolute; right:20px; bottom:20px; top:auto; transform:none;">
        <button class="btn-zoom" id="btnSketchZoomOut">-</button>
        <span id="sketch-zoom-val" class="zoom-text">100%</span>
        <button class="btn-zoom" id="btnSketchZoomIn">+</button>
      </div>
    </div>
  </div>

  <!-- TAB 4: INDEX -->
  <div class="workspace" id="tab-index">
    <div id="layout-tools-panel" class="floating-panel">
      <div class="panel-header">
        <span>Tools</span>
        <button class="panel-minimize-btn"><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMCIgaGVpZ2h0PSIyIiB2aWV3Qm94PSIwIDAgMTAgMiI+PHJlY3Qgd2lkdGg9IjEwIiBoZWlnaHQ9IjIiIGZpbGw9IiNmZmYiLz48L3N2Zz4=" class="pixel-icon" style="width:10px;height:2px;background:#fff;"></button>
      </div>
      <div class="panel-content" style="padding:10px; overflow-y:auto;">
        <div id="layer-controls"></div>
        <div class="section-title" style="margin-top:10px;">Layers</div>
        <div id="layer-list" class="layer-list"></div>
      </div>
    </div>

    <div class="panel-center" style="flex-direction:column; justify-content:flex-start; overflow:auto; padding-top:20px; align-items:flex-start;">
      <div class="artboard-wrapper">
        <div class="paper-sheet paper-a4 fixed-a4">
          <div id="layout-canvas-holder" style="width:100%; height:100%; background-color: #444;"></div>
        </div>
      </div>
    </div>
  </div>

  
  </div><!-- end app-body -->
  </div><!-- end layout-column -->
  
  <div id="floating-tooltip"></div>

  <!-- GLOBAL LIBRARY (Pinned) -->
  <div id="global-lib-btn" onclick="toggleGlobalLibrary()" data-tooltip="Open Memory Archive.">LIBRARY</div>
  <div id="global-lib-panel">
    <div class="section-title">Memories Archive</div>
    <div id="lib-grid" class="lib-grid"></div>
  </div>

  <!-- MUSIC PLAYER WIDGET -->
  <div id="music-player-widget" class="music-widget" data-tooltip="Background Music Player.">
    <div class="music-header">
      <span><span class="music-icon">♫</span> Music Player</span>
      <button id="btn-toggle-music" class="btn-mini" data-tooltip="Minimize/Maximize player."><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMCIgaGVpZ2h0PSIyIiB2aWV3Qm94PSIwIDAgMTAgMiI+PHJlY3Qgd2lkdGg9" class="pixel-icon" style="width:10px;height:2px;background:#fff;"></button>
    </div>
    <div id="music-content" class="music-content">
      <input type="text" id="music-url-input" class="retro-input" placeholder="Paste YouTube / Spotify Link..." style="font-size:10px; padding:6px;" data-tooltip="Paste YouTube or Spotify link here.">
      <button id="btn-play-music" class="btn-retro" style="font-size:10px; padding:4px;" data-tooltip="Load and play track.">Load Track</button>
      <div id="music-embed-container" style="margin-top:4px; min-height:0;"></div>
    </div>
  </div>

</div> <!-- END APP CONTAINER -->

  <!-- MODALS MOVED OUTSIDE APP-CONTAINER TO FIX Z-INDEX/TRANSFORM ISSUES -->
  <!-- THOUGHT CARD MODAL -->
  <div id="thought-card-modal" class="modal-overlay" style="display:none;" onclick="this.style.display='none'">
    <div class="modal-content" onclick="event.stopPropagation()">
      <img id="thought-card-img" src="" alt="Thought Card" style="display:none;">
      <div id="thought-card-html" class="thought-card-html" style="display:none;">
        <div class="paper-lines"></div>
        <div class="margin-line"></div>
        <div id="thought-card-text-content" class="card-text" style="user-select: text; -webkit-user-select: text; cursor: text;"></div>
        <div id="thought-card-date" class="card-date"></div>
      </div>
      <div style="display:flex; gap:10px; margin-top:10px;">
        <button id="btn-delete-card" class="btn-retro" style="width: auto; padding: 8px 20px; background-image:none; background-color:#e74c3c; color:white; border-color:#c0392b;">Delete</button>
        <button class="btn-retro" style="width: auto; padding: 8px 20px;" onclick="document.getElementById('thought-card-modal').style.display='none'">Close</button>
      </div>
    </div>
  </div>

  <!-- GALLERY MODAL -->
  <div id="gallery-modal" class="modal-overlay" style="display:none;" onclick="this.style.display='none'">
    <div class="modal-content" onclick="event.stopPropagation()">
      <img id="gallery-modal-img" src="" alt="Gallery Image">
      <button class="btn-retro" style="width: auto; padding: 8px 20px; margin-top: 10px;" onclick="document.getElementById('gallery-modal').style.display='none'">Close</button>
    </div>
  </div>

  <!-- INSTRUCTION MODAL -->
  <div id="instruction-modal" class="modal-overlay" style="display:none; z-index: 20001;" onclick="closeInstructionModal()">
    <div class="modal-content" style="width: auto; height: auto; padding: 0; display: flex; flex-direction: column; background: #dcdcdc; border: 2px solid #0072BC; box-shadow: 8px 8px 0 rgba(0,0,0,0.2);" onclick="event.stopPropagation()">
       <div style="height: 85vh; aspect-ratio: 16 / 9; max-width: 90vw; max-height: 90vh; background: #fff; overflow: hidden; display: flex; justify-content: center; align-items: center;">
         <img src="assets/UI%20items/instruction%20sheet.png" style="max-width: 100%; max-height: 100%; object-fit: contain;">
       </div>
       <div style="padding: 8px 12px; display: flex; justify-content: flex-start; align-items: center; background: #dcdcdc; border-top: 1px solid #999;">
          <label style="font-family: 'KK7VCROSDMono', monospace; font-size: 12px; display: flex; align-items: center; cursor: pointer; color: #000;">
              <input type="checkbox" id="chk-dont-show-instr" style="margin-right: 6px; cursor: pointer;"> Don't show again
          </label>
       </div>
    </div>
  </div>

  <!-- TOAST NOTIFICATION -->
  <div id="toast-notification" class="toast-notification">Saved</div>

<script src="sketch.js"></script>
<script src="cmyk-ascii-effect.js"></script>
<script src="ui-binding.js"></script>
<script>
  // --- CSS for Language Toggle ---
  const style = document.createElement('style');
  style.innerHTML = `.hidden { display: none !important; }`;
  document.head.appendChild(style);

  // Automatically fix SVG stretch issue by adding preserveAspectRatio="none"
  async function fixSvgStretch(selector, url) {
    try {
      const resp = await fetch(url);
      if (!resp.ok) return;
      let svgText = await resp.text();
      
      // Add preserveAspectRatio="none" to allow stretching
      if (svgText.includes('<svg')) {
        if (svgText.includes('preserveAspectRatio')) {
          svgText = svgText.replace(/preserveAspectRatio="[^"]*"/, 'preserveAspectRatio="none"');
        } else {
          svgText = svgText.replace('<svg', '<svg preserveAspectRatio="none"');
        }
        const encoded = encodeURIComponent(svgText).replace(/'/g, '%27').replace(/\(/g, '%28').replace(/\)/g, '%29');
        document.querySelectorAll(selector).forEach(el => {
          el.style.backgroundImage = `url("data:image/svg+xml;charset=utf-8,${encoded}")`;
        });
      }
    } catch (e) { console.warn('SVG Fix skipped (needs local server):', e); }
  }
  // Apply fix for top-bar and panel-center
  // fixSvgStretch('.top-bar', 'assets/UI%20items/top-bar.svg');
  // fixSvgStretch('.panel-center', 'assets/UI%20items/panel-center.svg');
  // fixSvgStretch('.panel-left', 'assets/UI%20items/panel-left.svg');
  // fixSvgStretch('.sidebar-bg-rotated', 'assets/UI%20items/top-bar.svg');

  window.closeInstructionModal = function() {
      const chk = document.getElementById('chk-dont-show-instr');
      if (chk && chk.checked) {
          localStorage.setItem('mem_idx_hide_instruction', 'true');
      }
      document.getElementById('instruction-modal').style.display = 'none';
  }

  // Sidebar Switch Logic
  // --- BOOT SEQUENCE ---
  document.addEventListener('DOMContentLoaded', () => {
      const bootScreen = document.getElementById('boot-screen');
      if(bootScreen) {
        const bootLines = [
            "MEM_IDX BIOS v1.0.4",
            "Copyright (C) 2024 Memory Systems Inc.",
            " ",
            "Checking RAM... 640K OK",
            "Loading modules...",
            " > core.sys",
            " > graphics.drv",
            " > audio.lib",
            "Initializing UI...",
            "Mounting virtual volumes...",
            "Done.",
            " ",
            "Starting session..."
        ];

        let delay = 0;
        bootLines.forEach((line, index) => {
            delay += Math.random() * 50 + 20;
            setTimeout(() => {
                const p = document.createElement('div');
                p.className = 'boot-line';
                p.innerText = line;
                bootScreen.appendChild(p);
                bootScreen.scrollTop = bootScreen.scrollHeight;
                if (index === bootLines.length - 1) {
                    const cursor = document.createElement('span');
                    cursor.className = 'cursor-blink';
                    bootScreen.appendChild(cursor);
                }
            }, delay);
        });

        setTimeout(() => {
            bootScreen.style.transition = 'opacity 0.5s ease-out';
            bootScreen.style.opacity = '0';
            setTimeout(() => {
                bootScreen.style.display = 'none';
                
                // Show Instruction Modal after boot
                if (!localStorage.getItem('mem_idx_hide_instruction')) {
                    const instrModal = document.getElementById('instruction-modal');
                    if(instrModal) instrModal.style.display = 'flex';
                }
            }, 500);
        }, delay + 500);
      }
  });

  // --- Users' Results Gallery Logic (Carousel) ---
  document.addEventListener('DOMContentLoaded', () => {
    const track = document.getElementById('users-results-track');
    const container = document.getElementById('users-results-container');
    if(!track || !container) return;

    const placeholder = document.getElementById('gallery-placeholder');

    // Static list of known assets to avoid 404 spam in the console.
    const basePath = "assets/users' results/";
    const potentialFiles = [
      "artwork (2).png",
      "drawing (1).svg",
      "memory_jitter (3) 2.gif",
      "memory_jitter (3).gif",
      "memory_jitter (4) copy.gif",
      "memory_jitter (4).gif",
      "memory_jitter (5) copy.gif",
      "memory_jitter (5).gif",
      "memory_jitter (6).gif",
      "memory_jitter (8).gif",
      "memory_jitter (9).gif",
      "memory_jitter.gif",
      "memory_static.png",
      "stabilo_universal (2).png",
      "stabilo_universal (4).png",
      "tải xuống (1).jpg",
      "tải xuống (2).jpg",
      "tải xuống (3).jpg",
      "tải xuống (4).jpg",
      "tải xuống (5).jpg",
      "tải xuống.jpg",
      "ty_pic01_svg.png",
      "ty_pic02.png",
      "ty_pic03.png",
      "ty_pic04.jpeg",
      "ty_pic05.png"
    ];

    let images = potentialFiles.map(f => encodeURI(basePath + f));

    // Add extra ASCII images requested
    const extraImages = [
        "assets/ASCII images/Artboard 4.png",
        "assets/ASCII images/artwork (1).png",
        "assets/ASCII images/artwork (2).png",
        "assets/ASCII images/artwork.png"
    ];
    extraImages.forEach(src => images.push(encodeURI(src)));
    
    function renderGallery() {
        track.innerHTML = ''; // Clear existing content
        
        // Animation State (Moved up for access in click handlers)
        let lastTime = 0;
        let waitTimer = 0;
        const waitDuration = 2000; 
        let isScrolling = false;
        let scrollTarget = 0;
        
        if (images.length === 0) {
            if(placeholder) {
              placeholder.style.display = 'block';
              track.appendChild(placeholder);
            }
            return;
        }

        // Duplicate images for seamless loop
        const displayImages = [...images, ...images];

        displayImages.forEach(src => {
            const wrapper = document.createElement('div');
            wrapper.className = 'gallery-slide-wrapper';

            const progressBar = document.createElement('div');
            progressBar.className = 'gallery-progress-bar';
            const progressFill = document.createElement('div');
            progressFill.className = 'gallery-progress-fill';
            progressBar.appendChild(progressFill);

            const img = document.createElement('img');
            img.src = src;
            img.className = 'gallery-slide-img';
            
            // Keep small size (200px) for "download" files
            if (decodeURI(src).includes("tải xuống")) {
                img.style.height = '200px';
            } else {
                img.style.height = '60vh';
            }
            
            img.loading = 'lazy';
            img.style.cursor = 'pointer';
            img.addEventListener('click', () => {
                // Logic to scroll to center
                const wCenter = wrapper.offsetLeft + wrapper.offsetWidth / 2;
                const viewCenter = container.scrollLeft + container.clientWidth / 2;
                
                // If clicked image is not in center (tolerance ~20px), scroll to it
                if (Math.abs(wCenter - viewCenter) > 20) {
                    scrollTarget = wCenter - container.clientWidth / 2;
                    isScrolling = true;
                    waitTimer = 0;
                    return; 
                }

                const modal = document.getElementById('gallery-modal');
                const modalImg = document.getElementById('gallery-modal-img');
                if(modal && modalImg) {
                    modalImg.src = src;
                    modal.style.display = 'flex';
                }
            });
            wrapper.appendChild(img);
            wrapper.appendChild(progressBar);
            track.appendChild(wrapper);
        });

        // Initialize Slideshow Animation
        const btnPrev = document.getElementById('user-gal-prev');
        const btnNext = document.getElementById('user-gal-next');
        let isPaused = false;
        
        container.addEventListener('mouseenter', () => isPaused = true);
        container.addEventListener('mouseleave', () => isPaused = false);

        const resetAutoScroll = () => { waitTimer = 0; isScrolling = false; };

        const getScrollTarget = (direction) => {
            const viewCenter = container.scrollLeft + container.clientWidth / 2;
            const wrappers = track.children;
            if (direction === 1) {
                for (let i = 0; i < wrappers.length; i++) {
                    const w = wrappers[i];
                    const wCenter = w.offsetLeft + w.offsetWidth / 2;
                    if (wCenter > viewCenter + 10) return wCenter - container.clientWidth / 2;
                }
            } else {
                for (let i = wrappers.length - 1; i >= 0; i--) {
                    const w = wrappers[i];
                    const wCenter = w.offsetLeft + w.offsetWidth / 2;
                    if (wCenter < viewCenter - 10) return wCenter - container.clientWidth / 2;
                }
            }
            return container.scrollLeft + (direction * container.clientWidth / 2);
        };

        if(btnPrev) btnPrev.addEventListener('click', () => {
            resetAutoScroll();
            if (container.scrollLeft < 50) { // Loop back if near start
                 const wrappers = track.children;
                 const halfCount = Math.floor(wrappers.length / 2);
                 if (halfCount > 0) container.scrollLeft += (wrappers[halfCount].offsetLeft - wrappers[0].offsetLeft);
            }
            scrollTarget = getScrollTarget(-1);
            isScrolling = true;
        });
        if(btnNext) btnNext.addEventListener('click', () => {
            resetAutoScroll();
            scrollTarget = getScrollTarget(1);
            isScrolling = true;
        });

        function animate(timestamp) {
            if (!lastTime) lastTime = timestamp;
            const dt = timestamp - lastTime;
            lastTime = timestamp;
            if (dt > 200) { requestAnimationFrame(animate); return; } // Bỏ qua nếu lag quá 200ms

            const wrappers = track.children;
            if (wrappers.length === 0) { requestAnimationFrame(animate); return; }

            // Calculate Loop Width dynamically based on the start of the second set
            const halfCount = Math.floor(wrappers.length / 2);
            if (halfCount > 0) {
                 const firstEl = wrappers[0];
                 const midEl = wrappers[halfCount];
                 // Calculate distance between first item and its duplicate (start of 2nd set)
                 const loopWidth = midEl.offsetLeft - firstEl.offsetLeft;

                 // Seamless Loop Check (Kiểm tra lặp vô tận chính xác hơn)
                 if (loopWidth > 0 && container.scrollLeft >= loopWidth) {
                     container.scrollLeft -= loopWidth;
                     if (isScrolling) scrollTarget -= loopWidth;
                 }
            }

            if (!isPaused) {
                if (!isScrolling) {
                    // Update Progress Bar
                    const progress = Math.min(waitTimer / waitDuration, 1) * 100;
                    let activeFound = false;
                    // Calculate center of current viewport
                    const viewCenter = container.scrollLeft + container.clientWidth / 2;

                    for (let i = 0; i < wrappers.length; i++) {
                        const w = wrappers[i];
                        const wCenter = w.offsetLeft + w.offsetWidth / 2;
                        
                        // Check if this image is in the center of the screen (within tolerance)
                        if (!activeFound && Math.abs(wCenter - viewCenter) < w.offsetWidth / 2 + 10) {
                             const fill = w.querySelector('.gallery-progress-fill');
                             if (fill) fill.style.width = `${progress}%`;
                             activeFound = true;
                        } else {
                             const fill = w.querySelector('.gallery-progress-fill');
                             if (fill) fill.style.width = '0%';
                        }
                    }

                    waitTimer += dt;
                    if (waitTimer >= waitDuration) {
                        // Find next image to center align
                        for (let i = 0; i < wrappers.length; i++) {
                            const w = wrappers[i];
                            const wCenter = w.offsetLeft + w.offsetWidth / 2;
                            
                            // Find first image with center to the right of current viewport center
                            if (wCenter > viewCenter + 20) { 
                                // Calculate scroll position to center the image
                                scrollTarget = wCenter - container.clientWidth / 2;
                                isScrolling = true;
                                break;
                            }
                        }
                        if (!isScrolling) waitTimer = 0;
                    }
                } else {
                    // Swipe Animation
                    const current = container.scrollLeft;
                    const dist = scrollTarget - current;
                    
                    if (Math.abs(dist) < 2) {
                        container.scrollLeft = scrollTarget;
                        isScrolling = false;
                        waitTimer = 0;
                    } else {
                        let move = dist * 0.15; // Increase swipe speed for smoothness
                        if (Math.abs(move) < 1) move = Math.sign(dist) * 1; // Reduce stop threshold to avoid stutter
                        // Safety: do not overshoot target
                        if (Math.abs(move) > Math.abs(dist)) move = dist;
                        container.scrollLeft += move;
                    }
                }
            }
            requestAnimationFrame(animate);
        }
        requestAnimationFrame(animate);
    }

    renderGallery();

    // Attach lightbox to static user result images
    const userResultsContainer = document.querySelector('.user-results-container');
    if (userResultsContainer) {
        userResultsContainer.addEventListener('click', (e) => {
            if (e.target.classList.contains('user-result-img')) {
                const modal = document.getElementById('gallery-modal');
                const modalImg = document.getElementById('gallery-modal-img');
                if(modal && modalImg) {
                    modalImg.src = e.target.src;
                    modal.style.display = 'flex';
                }
            }
        });
    }

    // Attach lightbox to static gallery grid images (Social Photos)
    document.querySelectorAll('.gallery-grid-img, .gallery-slide-img').forEach(img => {
        img.addEventListener('click', () => {
            const modal = document.getElementById('gallery-modal');
            const modalImg = document.getElementById('gallery-modal-img');
            if(modal && modalImg) {
                modalImg.src = img.src;
                modal.style.display = 'flex';
            }
        });
    });
  });

  // --- LANGUAGE TOGGLE LOGIC ---
  function setupLanguageToggle() {
    const content = document.querySelector('.intro-content');
    if(!content) return;

    let currentLang = 'vi'; // Default to Vietnamese
    const toggleBtn = document.createElement('button');
    toggleBtn.innerText = 'EN / VI';
    Object.assign(toggleBtn.style, {
        position: 'absolute',
        top: '20px',
        right: '140px', // Position to the left of Dark Mode button
        background: '#0072BC',
        color: '#fff',
        border: 'none',
        padding: '8px 15px',
        cursor: 'pointer',
        fontFamily: 'inherit',
        fontWeight: 'bold',
        zIndex: '10'
    });

    toggleBtn.onclick = () => {
        currentLang = currentLang === 'vi' ? 'en' : 'vi';
        document.querySelectorAll('.lang-vi').forEach(el => el.classList.toggle('hidden', currentLang !== 'vi'));
        document.querySelectorAll('.lang-en').forEach(el => el.classList.toggle('hidden', currentLang !== 'en'));
    };

    content.appendChild(toggleBtn);
    
    // Initial State
    document.querySelectorAll('.lang-vi').forEach(el => el.classList.remove('hidden'));
    document.querySelectorAll('.lang-en').forEach(el => el.classList.add('hidden'));
  }

  // --- INTRO DARK MODE LOGIC ---
  function setupIntroDarkMode() {
    const content = document.querySelector('.intro-content');
    if(!content) return;

    let isDarkMode = false;
    const toggleBtn = document.createElement('button');
    toggleBtn.innerText = 'DARK MODE';
    Object.assign(toggleBtn.style, {
        position: 'absolute',
        top: '20px',
        right: '20px',
        background: '#333',
        color: '#fff',
        border: 'none',
        padding: '8px 15px',
        cursor: 'pointer',
        fontFamily: 'inherit',
        fontWeight: 'bold',
        zIndex: '10'
    });

    toggleBtn.onclick = () => {
        isDarkMode = !isDarkMode;
        if(isDarkMode) {
            content.style.backgroundColor = '#1a1a1a';
            toggleBtn.innerText = 'LIGHT MODE';
            toggleBtn.style.background = '#eee';
            toggleBtn.style.color = '#111';
            
            const lines = content.querySelectorAll('.paper-lines, .margin-line');
            lines.forEach(e => e.style.display = 'none');
            
            content.querySelectorAll('h1, h2').forEach(e => {
                e.dataset.oc = e.style.color; e.style.color = '#66b3ff';
                if(e.style.borderBottomColor) { e.dataset.ob = e.style.borderBottomColor; e.style.borderBottomColor = '#66b3ff'; }
            });
            content.querySelectorAll('h3').forEach(e => {
                e.dataset.oc = e.style.color; e.style.color = '#ccc';
            });
            content.querySelectorAll('p, li, strong, .intro-desc').forEach(e => {
                e.dataset.oc = e.style.color; e.style.color = '#ddd';
            });
        } else {
            content.style.backgroundColor = '#fdfbf7';
            toggleBtn.innerText = 'DARK MODE';
            toggleBtn.style.background = '#333';
            toggleBtn.style.color = '#fff';
            
            const lines = content.querySelectorAll('.paper-lines, .margin-line');
            lines.forEach(e => e.style.display = '');
            
            content.querySelectorAll('h1, h2, h3, p, li, strong, .intro-desc').forEach(e => {
                if(e.dataset.oc !== undefined) e.style.color = e.dataset.oc;
                if(e.dataset.ob !== undefined) e.style.borderBottomColor = e.dataset.ob;
            });
        }
    };

    content.appendChild(toggleBtn);
  }

  function playTypewriter() {
    const titleEl = document.getElementById('intro-title');
    if(!titleEl) return;
    
    // Reset cursor visibility at start
    titleEl.classList.add('typewriter-cursor');

    const text = "The Index of Memory";
    titleEl.innerText = ""; // Clear initial text
    
    let i = 0;
    function typeWriter() {
      if (i < text.length) {
        titleEl.innerText += text.charAt(i);
        i++;
        setTimeout(typeWriter, 100); // Speed: 100ms per char
      } else {
        // Remove cursor when typing finishes
        titleEl.classList.remove('typewriter-cursor');
      }
    }
    setTimeout(typeWriter, 100);
  }

  window.switchSidebar = function(mode) {
    const introView = document.getElementById('intro-view');
    const appBody = document.getElementById('main-app-body');
    const tabs = document.querySelectorAll('.top-bar .tab-btn');
    const appSidebar = document.querySelector('.app-sidebar');

    if (mode === 'intro') {
      introView.style.display = 'flex';
      appBody.style.display = 'none';
      if(appSidebar) {
        appSidebar.style.display = ''; /* Remove old inline style if exists */
        appSidebar.classList.add('hidden');
      }
      
      tabs.forEach(t => {
        if(t.textContent.includes('Introduction')) {
          t.classList.add('active');
          t.classList.remove('disabled-tab');
        } else {
          t.classList.remove('active');
        }
      });
      
      
      // Replay Typewriter Effect
      playTypewriter();

    } else {
      introView.style.display = 'none';
      appBody.style.display = 'flex';
      if(appSidebar) {
        appSidebar.style.display = ''; /* Remove old inline style if exists */
        appSidebar.classList.remove('hidden');
      }
      tabs.forEach(t => {
        if(t.textContent.includes('Tool')) t.classList.add('active');
        else t.classList.remove('active');
        t.classList.remove('disabled-tab'); // Enable all top tabs
      });
      
      // Auto-switch to Tab 1 (Thoughts)
      if(window.switchTab) window.switchTab('tab-thoughts');
      
      // Auto-play music when entering Tool Tab
      if(window.playRandomMusic) window.playRandomMusic();
      
    }
  }

  window.duplicateArtboard = function(btn) {
    const wrapper = btn.closest('.artboard-wrapper');
    const clone = wrapper.cloneNode(true);
    
    // Update Name
    const input = clone.querySelector('.artboard-name');
    const currentName = input.value;
    const match = currentName.match(/(\d+)$/);
    if(match) {
      input.value = currentName.replace(/\d+$/, parseInt(match[1]) + 1);
    } else {
      input.value = currentName + " Copy";
    }

    // Update ID to avoid duplicates
    const canvasHolder = clone.querySelector('[id^="layout-canvas-holder"]');
    if(canvasHolder) {
      canvasHolder.id = "layout-canvas-holder-" + Date.now();
    }
    
    // Copy Canvas content if any (in case p5.js or other canvas is used)
    const oldCanvases = wrapper.querySelectorAll('canvas');
    const newCanvases = clone.querySelectorAll('canvas');
    if(oldCanvases.length > 0 && oldCanvases.length === newCanvases.length) {
      oldCanvases.forEach((oldCv, i) => {
        const newCv = newCanvases[i];
        const ctx = newCv.getContext('2d');
        if(ctx) ctx.drawImage(oldCv, 0, 0);
      });
    }

    wrapper.parentNode.insertBefore(clone, wrapper.nextSibling);
  }

  // --- Global Library Toggle ---
  window.toggleGlobalLibrary = function() {
    const btn = document.getElementById('global-lib-btn');
    const panel = document.getElementById('global-lib-panel');
    btn.classList.toggle('active');
    panel.classList.toggle('active');
  }

  // --- Export TXT Function (Moved outside switchSidebar to prevent errors) ---
  const btnSaveTXT = document.getElementById('btnSaveTXT');
  if(btnSaveTXT) {
    btnSaveTXT.addEventListener('click', () => {
      let content = "";
      // 1. Try to get text from DOM (if Show Source is on)
      const pre = document.querySelector('#input-canvas-holder pre');
      if(pre) content = pre.innerText;
      
      // 2. Fallback: Check global variable
      if(!content && window.currentAsciiText) content = window.currentAsciiText;

      if(!content) {
        alert("No ASCII text found. \nTip: Enable 'Show Source' or ensure window.currentAsciiText is set.");
        return;
      }

      const blob = new Blob([content], {type: "text/plain;charset=utf-8"});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = "memory_ascii.txt";
      a.click();
      URL.revokeObjectURL(url);
    });
  }

  // --- Typewriter Effect & Init ---
  document.addEventListener('DOMContentLoaded', () => {
    // 1. Initialize State (Intro Active, others disabled)
    switchSidebar('intro');
    
    // 2. Setup Dark Mode for Intro
    setupIntroDarkMode();
    // setupLanguageToggle();

    // 3. Intro Scroll "Back to Top" Logic
    const introView = document.getElementById('intro-view');
    const btnIntroTop = document.getElementById('btn-intro-top');
    
    if(introView && btnIntroTop) {
      introView.addEventListener('scroll', () => {
        if(introView.scrollTop > 300) {
          btnIntroTop.style.display = 'block';
        } else {
          btnIntroTop.style.display = 'none';
        }
      });
      
      btnIntroTop.addEventListener('click', () => {
        introView.scrollTo({ top: 0, behavior: 'smooth' });
      });
    }
  });
</script>

</body>
</html>
